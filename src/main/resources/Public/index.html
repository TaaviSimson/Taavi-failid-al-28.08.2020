<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bank controller</title>
    <link rel="stylesheet" href = "styling.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>
<body>

<button onclick = "alert(1);">
    Test nupp
</button>

<button id = "testButton2">
    Test nupp 2
</button>

<button id = "testButton3">
    Test nupp 3
</button>

<button id = "testButton4">
    Test nupp 4
</button>

<button id = "createclient">
    Create client
</button>

<button id = "createaccount">
    Create account
</button>

<button id = "bankbalance">
    Bank balance
</button>

<button id = "deposit">
    Deposit
</button>

<br/>
<br/>
<input id ="input1"/> Button name / Account number
<br/>
<br/>
<input id ="input2"/> First name / Balance / Deposit
<br/>
<br/>
<input id ="input3"/> Last name / Client ID

<script>
        let button2 = document.getElementById("testButton2");
        button2.onclick = function(){
            alert("2");
        }


        let button3 = document.getElementById("testButton3");
        let action = function(){
            alert("3");
        }
        button3.addEventListener('click',action);


        let button4 = document.getElementById("testButton4");
        button4.onclick = function(){
            alert(document.getElementById("input1").value);
            button4.innerHTML = document.getElementById("input1").value;
        }


        let button5 = document.getElementById("createclient");
        button5.addEventListener('click', function(){
			fetch('/createclient', {
				method: 'POST',
				cache: 'no-cache',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					firstName: document.getElementById("input2").value,
					lastName: document.getElementById("input3").value
				})
			})
			.then(function() {
                console.log("OK");
			})
			.catch(function(err) {
				console.log(err);
			});
		});


		let button6 = document.getElementById("createaccount");
        button6.addEventListener('click', function(){
			fetch('/createaccount', {
				method: 'POST',
				cache: 'no-cache',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					accountNr: document.getElementById("input1").value,
					balance: document.getElementById("input2").value,
					clientId: document.getElementById("input3").value
				})
			})
			.then(function() {
                console.log("OK");
			})
			.catch(function(err) {
				console.log(err);
			});
		});

		let button7 = document.getElementById("bankbalance");
        button7.addEventListener('click', function(){
			fetch('/bankbalance/'+ document.getElementById("input1").value, {
				method: 'GET',
				cache: 'no-cache',
				headers: {
					'Content-Type': 'application/json'
				},
			})
			.then(function(response) {
                return response.json();
			})
			.then(function(jsonData) {
                console.log(jsonData);
			})
			.catch(function(err) {
				console.log(err);
			});
		});


        let button8 = document.getElementById("deposit");
        button8.addEventListener('click', function(){
            fetch('/deposit/' + document.getElementById("input1").value+
                '?deposit='+document.getElementById("input2").value, {
                method: 'PUT',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    accountNr: document.getElementById("input1").value,
                    deposit: document.getElementById("input2").value,
                })
            })
                .then(function() {
                    console.log("OK");
                })
                .catch(function(err) {
                    console.log(err);
                });
        });



</script>
</body>
</html>