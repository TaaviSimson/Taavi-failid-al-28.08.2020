<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bank controller</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href = "styling.css">
</head>

<body>
<div class="container text-center">

<button id = "createclient">
    Create client
</button>

<button id = "createaccount">
    Create account
</button>

<button id = "bankbalance">
    Bank balance
</button>

<button id = "deposit">
    Deposit
</button>

<button id = "withdraw">
    Withdraw
</button>

<button id = "transfer">
    Transfer
</button>

<br/>
<br/>
<input id ="input1" placeholder="Account to (deposit) / Check balance"/>
<br/>
<br/>
<input id ="input2" placeholder="First name / Insert balance / Deposit / Account from (withdraw)"/>
<br/>
<br/>
<input id ="input3" placeholder="Last name / Client ID / Withdraw / Transfer"/>

    <div id = "output">

    </div>

</div>

<script>
        let button5 = document.getElementById("createclient");
        button5.addEventListener('click', function(){
			fetch('/createclient', {
				method: 'POST',
				cache: 'no-cache',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					firstName: document.getElementById("input2").value,
					lastName: document.getElementById("input3").value
				})
			})
			.then(function() {
                console.log("OK");
			})
			.catch(function(err) {
				console.log(err);
			});
		});


		let button6 = document.getElementById("createaccount");
        button6.addEventListener('click', function(){
			fetch('/createaccount', {
				method: 'POST',
				cache: 'no-cache',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					accountNr: document.getElementById("input1").value,
					balance: document.getElementById("input2").value,
					clientId: document.getElementById("input3").value
				})
			})
			.then(function() {
                console.log("OK");
			})
			.catch(function(err) {
				console.log(err);
			});
		});

		let button7 = document.getElementById("bankbalance");
        button7.addEventListener('click', function(){
			fetch('/bankbalance/'+ document.getElementById("input1").value, {
				method: 'GET',
				cache: 'no-cache',
				headers: {
					'Content-Type': 'application/json'
				},
			})
			.then(function(response) {
                return response.json();
			})
			.then(function(jsonData) {
                console.log(jsonData);
			})
			.catch(function(err) {
				console.log(err);
			});
		});


        let button8 = document.getElementById("deposit");
        button8.addEventListener('click', function(){
            fetch('/deposit/' + document.getElementById("input1").value+
                '?deposit='+document.getElementById("input2").value, {
                method: 'PUT',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    accountNr: document.getElementById("input1").value,
                    deposit: document.getElementById("input2").value,
                })
            })
                .then(function() {
                    console.log("OK");
                })
                .catch(function(err) {
                    console.log(err);
                });
        });


        let button9 = document.getElementById("withdraw");
        button9.addEventListener('click', function(){
            fetch('/withdraw/' + document.getElementById("input2").value+
                '?withdraw='+document.getElementById("input3").value, {
                method: 'PUT',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    accountNr: document.getElementById("input2").value,
                    deposit: document.getElementById("input3").value,
                })
            })
                .then(function() {
                    console.log("OK");
                })
                .catch(function(err) {
                    console.log(err);
                });
        });


        let button10 = document.getElementById("transfer");
        button10.addEventListener('click', function(){
            fetch('/transfer/' + document.getElementById("input2").value+'/'+
                document.getElementById("input1").value +
                '?transfer='+document.getElementById("input3").value, {
                method: 'PUT',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    accountNr: document.getElementById("input2").value,
                    accountNr2: document.getElementById("input1").value,
                    transfer: document.getElementById("input3").value,
                })
            })
                .then(function() {
                    console.log("OK");
                })
                .catch(function(err) {
                    console.log(err);
                });
        });


</script>
</body>
</html>